<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant AI Chatbot Portfolio</title>
    <link rel="stylesheet" href="main css/chatbot.css">
    <script type="module" src="button.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <div class="container">
        <button id="unhide-button" class="cta-button" style="display: none;">
            ‚Üê
        </button>
        <div class="header">
            <h1>Tr·ª£ l√Ω th√¢n thi·ªán</h1>
            <p>Nh√¢n vi√™n h·ªó tr·ª£ kh√°ch h√†ng ƒë∆∞·ª£c c√° nh√¢n h√≥a cho t·ª´ng nh√† h√†ng</p>
        </div>

        <div class="Introduction">
            <div class="cta-wrapper">
                <a href="#" class="cta-button" id="start-button">B·∫Øt ƒê·∫ßu Ngay ‚Üí</a>
            </div>
            <div class="features-title">
                <span class="sparkle">‚ú®</span>
                <span>T√≠nh NƒÉng N·ªïi B·∫≠t</span>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <span class="feature-icon">ü§ñ</span>
                    <h3 class="feature-title">Tr·∫£ L·ªùi T·ª± ƒê·ªông</h3>
                    <p class="feature-description">
                        Tr·∫£ l·ªùi kh√°ch h√†ng 24/7, x·ª≠ l√Ω h√†ng trƒÉm c√¢u h·ªèi c√πng l√∫c v·ªõi ƒë·ªô ch√≠nh x√°c cao
                    </p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üìÖ</span>
                    <h3 class="feature-title">ƒê·∫∑t B√†n T·ª± ƒê·ªông</h3>
                    <p class="feature-description">
                        Kh√°ch h√†ng c√≥ th·ªÉ ƒë·∫∑t b√†n, ch·ªçn th·ªùi gian, s·ªë l∆∞·ª£ng ng∆∞·ªùi m·ªôt c√°ch nhanh ch√≥ng qua chat
                    </p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üí∞</span>
                    <h3 class="feature-title">Ti·∫øt Ki·ªám Chi Ph√≠</h3>
                    <p class="feature-description">
                        Gi·∫£m 80% chi ph√≠ nh√¢n s·ª± chƒÉm s√≥c kh√°ch h√†ng, kh√¥ng gi·ªõi h·∫°n s·ªë l∆∞·ª£ng tin nh·∫Øn
                    </p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üõçÔ∏è</span>
                    <h3 class="feature-title">T∆∞ V·∫•n S·∫£n Ph·∫©m</h3>
                    <p class="feature-description">
                        Chatbot hi·ªÉu menu, gi√° c·∫£, khuy·∫øn m√£i ƒë·ªÉ t∆∞ v·∫•n v√† g·ª£i √Ω s·∫£n ph·∫©m ph√π h·ª£p cho kh√°ch
                    </p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üì±</span>
                    <h3 class="feature-title">ƒêa N·ªÅn T·∫£ng</h3>
                    <p class="feature-description">
                        T√≠ch h·ª£p Facebook, Zalo, Website, WhatsApp - M·ªôt chatbot cho m·ªçi k√™nh b√°n h√†ng
                    </p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üìä</span>
                    <h3 class="feature-title">B√°o C√°o Th·ªëng K√™</h3>
                    <p class="feature-description">
                        Theo d√µi hi·ªáu qu·∫£, ph√¢n t√≠ch h√†nh vi kh√°ch h√†ng, t·ªëi ∆∞u h√≥a chi·∫øn l∆∞·ª£c kinh doanh
                    </p>
                </div>
            </div>
        </div>

        <div class="main-content hidden">
            <div class="left-section">
                <div class="restaurant-list">
                    <h2>Ch·ªçn nh√† h√†ng</h2>
                    <div class="restaurant-card" onclick="selectRestaurant('golden-dragon')">
                        <div class="restaurant-card-header">
                            <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=100&h=100&fit=crop&crop=center"
                                alt="Golden Dragon" class="restaurant-avatar">
                            <div class="restaurant-info">
                                <h3>Golden Dragon</h3>
                                <p>Nh√† h√†ng Trung Hoa cao c·∫•p</p>
                            </div>
                        </div>
                    </div>

                    <div class="restaurant-card" onclick="selectRestaurant('pho-saigon')">
                        <div class="restaurant-card-header">
                            <img src="https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=100&h=100&fit=crop&crop=center"
                                alt="Ph·ªü S√†i G√≤n" class="restaurant-avatar">
                            <div class="restaurant-info">
                                <h3>Ph·ªü S√†i G√≤n</h3>
                                <p>Ph·ªü truy·ªÅn th·ªëng Vi·ªát Nam</p>
                            </div>
                        </div>
                    </div>

                    <div class="restaurant-card" onclick="selectRestaurant('italian-corner')">
                        <div class="restaurant-card-header">
                            <img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=100&h=100&fit=crop&crop=center"
                                alt="Italian Corner" class="restaurant-avatar">
                            <div class="restaurant-info">
                                <h3>Italian Corner</h3>
                                <p>Nh√† h√†ng √ù authentic</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-section" id="info-section">
                    <h3 id="info-title">Th√¥ng tin nh√† h√†ng</h3>
                    <div class="info-details" id="info-details">
                        Ch·ªçn m·ªôt nh√† h√†ng ƒë·ªÉ xem th√¥ng tin chi ti·∫øt
                    </div>
                </div>
            </div>

            <div class="chatbox" id="chatbox">
                <div class="chat-header">
                    <img src="" alt="Restaurant" class="chat-avatar" id="chat-avatar">
                    <div>
                        <div class="chat-title" id="chat-title">Ch·ªçn nh√† h√†ng</div>
                        <div class="chat-status">Lu√¥n s·∫µn s√†ng ph·ª•c v·ª•</div>
                    </div>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <div class="message">
                        <img src="" alt="Bot" class="message-avatar">
                        <div class="message-content">
                            Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ·∫£o. H√£y ch·ªçn nh√† h√†ng ƒë·ªÉ b·∫Øt ƒë·∫ßu tr√≤ chuy·ªán! üëã
                        </div>
                    </div>
                </div>

                <div class="quick-questions">
                    <h4>B·∫°n c·∫ßn ch√∫ng t√¥i h·ªó tr·ª£ ƒëi·ªÅu g√¨?</h4>
                    <div class="question-grid">
                        <button class="question-btn" onclick="sendQuickQuestion('T√¥i mu·ªën ƒë·∫∑t b√†n')">üçΩÔ∏è ƒê·∫∑t
                            b√†n</button>
                        <button class="question-btn" onclick="sendQuickQuestion('Menu h√¥m nay c√≥ g√¨?')">üìã Xem
                            menu</button>
                        <button class="question-btn" onclick="sendQuickQuestion('Gi·ªù m·ªü c·ª≠a?')">üïê Gi·ªù m·ªü c·ª≠a</button>
                        <button class="question-btn" onclick="sendQuickQuestion('ƒê·ªãa ch·ªâ nh√† h√†ng?')">üìç ƒê·ªãa
                            ch·ªâ</button>
                    </div>
                </div>

                <div class="chat-input">
                    <input type="text" id="message-input" placeholder="Nh·∫≠p tin nh·∫Øn..."
                        onkeypress="handleKeyPress(event)">
                    <button onclick="sendMessage()">‚û§</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const restaurants = {
            'golden-dragon': {
                name: 'Golden Dragon',
                avatar: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=100&h=100&fit=crop&crop=center',
                info: `<strong>Golden Dragon - Nh√† h√†ng Trung Hoa cao c·∫•p</strong><br><br>
                       <strong>ƒê·ªãa ch·ªâ:</strong> 123 ƒê∆∞·ªùng Nguy·ªÖn Hu·ªá, Qu·∫≠n 1, TP.HCM<br>
                       <strong>Gi·ªù m·ªü c·ª≠a:</strong> 10:00 - 22:00 (Th·ª© 2 - Ch·ªß nh·∫≠t)<br>
                       <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> (028) 3822 1234<br>
                       <strong>ƒê·∫∑c s·∫£n:</strong> V·ªãt quay B·∫Øc Kinh, Dim sum, C∆°m chi√™n D∆∞∆°ng Ch√¢u<br>
                       <strong>Gi√° trung b√¨nh:</strong> 300.000 - 500.000 VNƒê/ng∆∞·ªùi<br>
                       <strong>D·ªãch v·ª•:</strong> ƒê·∫∑t b√†n tr∆∞·ªõc, Ph√≤ng ri√™ng, Ti·ªác c∆∞·ªõi`,
                responses: {
                    'T√¥i mu·ªën ƒë·∫∑t b√†n': 'Ch√†o b·∫°n! T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ƒë·∫∑t b√†n t·∫°i Golden Dragon. B·∫°n mu·ªën ƒë·∫∑t b√†n cho m·∫•y ng∆∞·ªùi v√† v√†o l√∫c n√†o ·∫°? üìû',
                    'Menu h√¥m nay c√≥ g√¨?': 'Menu h√¥m nay c√≥: V·ªãt quay B·∫Øc Kinh (450k), Dim sum set (280k), C∆°m chi√™n D∆∞∆°ng Ch√¢u (120k), T√¥m h√πm s·ªët XO (650k). B·∫°n c√≥ mu·ªën xem menu ƒë·∫ßy ƒë·ªß kh√¥ng? üçú',
                    'Gi·ªù m·ªü c·ª≠a?': 'Golden Dragon m·ªü c·ª≠a t·ª´ 10:00 - 22:00 h√†ng ng√†y. Hi·ªán t·∫°i ch√∫ng t√¥i ƒëang m·ªü c·ª≠a v√† s·∫µn s√†ng ph·ª•c v·ª• b·∫°n! üïê',
                    'ƒê·ªãa ch·ªâ nh√† h√†ng?': 'Golden Dragon t·ªça l·∫°c t·∫°i 123 ƒê∆∞·ªùng Nguy·ªÖn Hu·ªá, Qu·∫≠n 1, TP.HCM. R·∫•t g·∫ßn ch·ª£ B·∫øn Th√†nh, b·∫°n c√≥ th·ªÉ ƒëi b·ªô ho·∫∑c taxi ƒë·∫øn d·ªÖ d√†ng! üìç'
                }
            },
            'pho-saigon': {
                name: 'Ph·ªü S√†i G√≤n',
                avatar: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=100&h=100&fit=crop&crop=center',
                info: `<strong>Ph·ªü S√†i G√≤n - Ph·ªü truy·ªÅn th·ªëng Vi·ªát Nam</strong><br><br>
                       <strong>ƒê·ªãa ch·ªâ:</strong> 456 ƒê∆∞·ªùng L√™ L·ª£i, Qu·∫≠n 1, TP.HCM<br>
                       <strong>Gi·ªù m·ªü c·ª≠a:</strong> 06:00 - 22:00 (Th·ª© 2 - Ch·ªß nh·∫≠t)<br>
                       <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> (028) 3829 5678<br>
                       <strong>ƒê·∫∑c s·∫£n:</strong> Ph·ªü b√≤, Ph·ªü g√†, B√∫n b√≤ Hu·∫ø, Ch·∫£ c√°<br>
                       <strong>Gi√° trung b√¨nh:</strong> 50.000 - 120.000 VNƒê/b√°t<br>
                       <strong>D·ªãch v·ª•:</strong> Mang v·ªÅ, Giao h√†ng, ƒê·∫∑t b√†n online`,
                responses: {
                    'T√¥i mu·ªën ƒë·∫∑t b√†n': 'Ch√†o b·∫°n! Ph·ªü S√†i G√≤n lu√¥n s·∫µn s√†ng ph·ª•c v·ª•. B·∫°n mu·ªën ƒë·∫∑t b√†n cho m·∫•y ng∆∞·ªùi v√† khi n√†o ·∫°? Ch√∫ng t√¥i c√≥ th·ªÉ s·∫Øp x·∫øp ngay! üçú',
                    'Menu h√¥m nay c√≥ g√¨?': 'Menu h√¥m nay: Ph·ªü b√≤ t√°i (65k), Ph·ªü g√† (60k), B√∫n b√≤ Hu·∫ø (70k), Ch·∫£ c√° L√£ V·ªçng (85k), N∆∞·ªõc m√≠a (15k). T·∫•t c·∫£ ƒë·ªÅu t∆∞∆°i ngon! ü•¢',
                    'Gi·ªù m·ªü c·ª≠a?': 'Ph·ªü S√†i G√≤n m·ªü c·ª≠a t·ª´ 6:00 s√°ng ƒë·∫øn 22:00 t·ªëi h√†ng ng√†y. Ph·ªü s√°ng ƒë·∫∑c bi·ªát ngon, b·∫°n n√™n th·ª≠! ‚òÄÔ∏è',
                    'ƒê·ªãa ch·ªâ nh√† h√†ng?': 'Ph·ªü S√†i G√≤n ·ªü 456 ƒê∆∞·ªùng L√™ L·ª£i, Qu·∫≠n 1, TP.HCM. G·∫ßn Nh√† h√°t Th√†nh ph·ªë, r·∫•t thu·∫≠n ti·ªán! üè¢'
                }
            },
            'italian-corner': {
                name: 'Italian Corner',
                avatar: 'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=100&h=100&fit=crop&crop=center',
                info: `<strong>Italian Corner - Nh√† h√†ng √ù authentic</strong><br><br>
                       <strong>ƒê·ªãa ch·ªâ:</strong> 789 ƒê∆∞·ªùng ƒê·ªìng Kh·ªüi, Qu·∫≠n 1, TP.HCM<br>
                       <strong>Gi·ªù m·ªü c·ª≠a:</strong> 11:00 - 23:00 (Th·ª© 2 - Ch·ªß nh·∫≠t)<br>
                       <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> (028) 3824 9012<br>
                       <strong>ƒê·∫∑c s·∫£n:</strong> Pizza, Pasta, Risotto, Tiramisu<br>
                       <strong>Gi√° trung b√¨nh:</strong> 200.000 - 400.000 VNƒê/ng∆∞·ªùi<br>
                       <strong>D·ªãch v·ª•:</strong> Kh√¥ng gian l√£ng m·∫°n, R∆∞·ª£u vang √ù, ƒê·∫∑t ti·ªác sinh nh·∫≠t`,
                responses: {
                    'T√¥i mu·ªën ƒë·∫∑t b√†n': 'Ciao! Ch√†o m·ª´ng b·∫°n ƒë·∫øn Italian Corner. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ƒë·∫∑t b√†n. B·∫°n mu·ªën ƒë·∫∑t cho m·∫•y ng∆∞·ªùi v√† th·ªùi gian n√†o ·∫°? üçï',
                    'Menu h√¥m nay c√≥ g√¨?': 'Menu h√¥m nay: Pizza Margherita (180k), Pasta Carbonara (220k), Risotto Mushroom (260k), Tiramisu (95k). T·∫•t c·∫£ ƒë∆∞·ª£c l√†m theo c√¥ng th·ª©c √ù! üçù',
                    'Gi·ªù m·ªü c·ª≠a?': 'Italian Corner m·ªü c·ª≠a t·ª´ 11:00 - 23:00 h√†ng ng√†y. Bu·ªïi t·ªëi c√≥ kh√¥ng gian l√£ng m·∫°n v·ªõi n·∫øn v√† nh·∫°c √ù! üïØÔ∏è',
                    'ƒê·ªãa ch·ªâ nh√† h√†ng?': 'Italian Corner t·∫°i 789 ƒê∆∞·ªùng ƒê·ªìng Kh·ªüi, Qu·∫≠n 1, TP.HCM. View s√¥ng S√†i G√≤n tuy·ªát ƒë·∫πp, r·∫•t l√Ω t∆∞·ªüng cho h·∫πn h√≤! üåÖ'
                }
            }
        };

        let currentRestaurant = null;

        function selectRestaurant(restaurantId) {
            // Remove active class from all cards
            document.querySelectorAll('.restaurant-card').forEach(card => {
                card.classList.remove('active');
            });

            // Add active class to selected card
            event.currentTarget.classList.add('active');

            currentRestaurant = restaurants[restaurantId];

            // Show restaurant info
            const infoSection = document.getElementById('info-section');
            const infoTitle = document.getElementById('info-title');
            const infoDetails = document.getElementById('info-details');

            infoTitle.textContent = currentRestaurant.name;
            infoDetails.innerHTML = currentRestaurant.info;
            infoSection.classList.add('active');

            // Show chatbox
            const chatbox = document.getElementById('chatbox');
            const chatTitle = document.getElementById('chat-title');
            const chatAvatar = document.getElementById('chat-avatar');
            const chatMessages = document.getElementById('chat-messages');

            chatTitle.textContent = currentRestaurant.name;
            chatAvatar.src = currentRestaurant.avatar;
            chatbox.classList.add('active');

            // Reset chat messages
            chatMessages.innerHTML = `
                <div class="message">
                    <img src="${currentRestaurant.avatar}" alt="Bot" class="message-avatar">
                    <div class="message-content">
                        Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ·∫£o c·ªßa ${currentRestaurant.name}. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay? üòä
                    </div>
                </div>
            `;
        }

        function closeInfo() {
            document.getElementById('info-section').classList.remove('active');
        }

        function sendQuickQuestion(question) {
            if (!currentRestaurant) {
                alert('Vui l√≤ng ch·ªçn nh√† h√†ng tr∆∞·ªõc!');
                return;
            }

            addMessage(question, true);

            setTimeout(() => {
                const response = currentRestaurant.responses[question] || 'Xin l·ªói, t√¥i ch∆∞a hi·ªÉu c√¢u h·ªèi n√†y. B·∫°n c√≥ th·ªÉ h·ªèi c√°ch kh√°c kh√¥ng?';
                addMessage(response, false);
            }, 1000);
        }

        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();

            if (!message) return;
            if (!currentRestaurant) {
                alert('Vui l√≤ng ch·ªçn nh√† h√†ng tr∆∞·ªõc!');
                return;
            }

            addMessage(message, true); // Hi·ªÉn th·ªã message ng∆∞·ªùi d√πng
            input.value = '';

            const WEBHOOK_URL = 'https://n8n.kpsimple.store/webhook/9c35f315-03c5-4569-8789-ea6d6c8543e2';

            // G·ª≠i message qua query param (GET)
            const urlWithParams = `${WEBHOOK_URL}?message=${encodeURIComponent(message)}&restaurant=${encodeURIComponent(currentRestaurant.name || 'golden-dragon')}`;

            fetch(urlWithParams)
                .then(response => {
                    return response.text().then(text => {
                        if (!response.ok) {
                            throw new Error(`L·ªói server (${response.status}): ${text}`);
                        }

                        try {
                            return JSON.parse(text);
                        } catch (parseError) {
                            throw new Error('Server tr·∫£ v·ªÅ d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá');
                        }
                    });
                })
                .then(data => {
                    let reply = null;

                    if (Array.isArray(data)) {
                        if (data.length > 0 && data[0].reply) {
                            reply = data[0].reply;
                        }
                    } else if (data && data.reply) {
                        reply = data.reply;
                    }

                    if (reply) {
                        addMessage(reply, false);
                    } else {
                        throw new Error('Kh√¥ng t√¨m th·∫•y ph·∫£n h·ªìi h·ª£p l·ªá t·ª´ webhook');
                    }
                })
                .catch(error => {
                    console.error('L·ªói webhook:', error);
                    addMessage("Xin l·ªói, h·ªá th·ªëng g·∫∑p l·ªói. Vui l√≤ng th·ª≠ l·∫°i sau.", false);
                });
            setTimeout(() => {
                let response = 'C·∫£m ∆°n b·∫°n ƒë√£ nh·∫Øn tin! ƒê·ªôi ng≈© c·ªßa ch√∫ng t√¥i s·∫Ω ph·∫£n h·ªìi s·ªõm nh·∫•t c√≥ th·ªÉ. B·∫°n c√≥ th·ªÉ th·ª≠ c√°c c√¢u h·ªèi ph·ªï bi·∫øn b√™n d∆∞·ªõi! üòä';

                // Simple keyword matching
                if (message.toLowerCase().includes('ƒë·∫∑t b√†n')) {
                    response = currentRestaurant.responses['T√¥i mu·ªën ƒë·∫∑t b√†n'];
                } else if (message.toLowerCase().includes('menu') || message.toLowerCase().includes('m√≥n')) {
                    response = currentRestaurant.responses['Menu h√¥m nay c√≥ g√¨?'];
                } else if (message.toLowerCase().includes('gi·ªù') || message.toLowerCase().includes('m·ªü c·ª≠a')) {
                    response = currentRestaurant.responses['Gi·ªù m·ªü c·ª≠a?'];
                } else if (message.toLowerCase().includes('ƒë·ªãa ch·ªâ') || message.toLowerCase().includes('·ªü ƒë√¢u')) {
                    response = currentRestaurant.responses['ƒê·ªãa ch·ªâ nh√† h√†ng?'];
                }

                addMessage(response, false);
            }, 1000);
        }



        function addMessage(message, isUser) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : ''}`;

            const avatar = isUser ? '/Picture/Support.jpg' : currentRestaurant.avatar;

            const content = isUser ? message : marked.parse(message); // Chuy·ªÉn markdown sang HTML n·∫øu l√† bot

            messageDiv.innerHTML = `
            <img src="${avatar}" alt="${isUser ? 'User' : 'Bot'}" class="message-avatar">
            <div class="message-content">${content}</div>
        `;

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        document.getElementById('start-button').addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector('.Introduction').style.display = 'none';
            document.querySelector('.main-content').classList.remove('hidden');
            document.getElementById('unhide-button').style.display = 'block';
        });

        // N√∫t "‚Üê Quay l·∫°i ph·∫ßn gi·ªõi thi·ªáu"
        document.getElementById('unhide-button').addEventListener('click', function () {
            document.querySelector('.Introduction').style.display = 'block';
            document.querySelector('.main-content').classList.add('hidden');
            this.style.display = 'none';
        });
    </script>
</body>

</html>